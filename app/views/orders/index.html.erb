<%= render 'shared/delete' %>

<div class='container'>
    <h1>Listing Orders</h1>

<form action="<%= orders_path %>">
  <div>
    <strong>Status:</strong>
    <%= select_tag :status, options_for_select(@statuses, params[:status]) %>
    <button type="submit">Show</button>
    <%= link_to 'Dashbaord', '/' %>
  </div>
</form>

  <table class="table">
    <thead>
      <tr class='table-primary'>
        <th>Order Id</th>
        <th>Ordered Items</th>
        <th>Status</th>
        <th>Bill</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @orders.each do |order| %>
        <tr class = <%= get_class(order) %>>
          <td><%= order.id %></td>
          <% ordered_item, status = ordered_items_status(order) %>
          <td><%= ordered_item %></td>
          <td><%= status %></td>
          <td><%= order.bill %></td>
          <td><%= link_to 'Show', order_path(order) %></td>
          <% if current_user.admin? %>
          <td><%= link_to 'Edit', edit_order_path(order) %></td>
          <% end %>
          <td><%= link_to 'Destroy', order, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= paginate @orders %>
  <br>
</div>
